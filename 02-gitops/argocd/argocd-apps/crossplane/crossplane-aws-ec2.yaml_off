apiVersion: ec2.aws.crossplane.io/v1alpha1
kind: Instance
metadata:
  name: cmi-example
  namespace: crossplane-system
spec:
  forProvider:
    region: us-east-1
    imageId: ami-0b0dcb5067f052a63
    instanceType: t2.medium
    # instanceMarketOptions:
    #   marketType: spot
    #   spotOptions:
    #     instanceInterruptionBehavior: hibernate
    #     spotInstanceType: persistent
    tags:
      - key: Name
        value: cmi-example
  providerConfigRef:
    name: aws-provider
  providerRef:
    name: provider-aws
---
apiVersion: ec2.aws.crossplane.io/v1alpha1
kind: Instance
metadata:
  name: cmi-http-server
  namespace: crossplane-system
spec:
  forProvider:
    region: us-east-1
    imageId: ami-0b0dcb5067f052a63
    instanceType: t2.medium
    # instanceMarketOptions:
    #   marketType: spot
    #   spotOptions:
    #     instanceInterruptionBehavior: hibernate
    #     spotInstanceType: persistent
    tags:
      - key: Name
        value: cmi-http-server
    userData: "IyEvYmluL2Jhc2gKeXVtIHVwZGF0ZSAteQphbWF6b24tbGludXgtZXh0cmFzIGluc3RhbGwgLXkgbGFtcC1tYXJpYWRiMTAuMi1waHA3LjIgcGhwNy4yCnl1bSBpbnN0YWxsIC15IGh0dHBkIG1hcmlhZGItc2VydmVyCnN5c3RlbWN0bCBzdGFydCBodHRwZApzeXN0ZW1jdGwgZW5hYmxlIGh0dHBkCnVzZXJtb2QgLWEgLUcgYXBhY2hlIGVjMi11c2VyCmNob3duIC1SIGVjMi11c2VyOmFwYWNoZSAvdmFyL3d3dwpjaG1vZCAyNzc1IC92YXIvd3d3CmZpbmQgL3Zhci93d3cgLXR5cGUgZCAtZXhlYyBjaG1vZCAyNzc1IHt9IFw7CmZpbmQgL3Zhci93d3cgLXR5cGUgZiAtZXhlYyBjaG1vZCAwNjY0IHt9IFw7CmVjaG8gIjw/cGhwIHBocGluZm8oKTsgPz4iID4gL3Zhci93d3cvaHRtbC9waHBpbmZvLnBocA=="
  providerConfigRef:
    name: aws-provider
  providerRef:
    name: provider-aws